# Типы датасета
AI-phrase-classifier основан на технологиях искуственного интелекта, в частности на искусственных нейронных сетях и алгоритмах машинного обучения. Классификатор обучается на датасете, который хранится в json формате, датасет может редактироваться как вручную, так и через [графический интерфейс](https://github.com/kretoffer/AI-phrase-classifier/tree/main/docs/guide.ru.md).

Датасет классификатора делится на две части и выглядит так:
```json
{
    "hand-data": [], // ручная часть датасета
    "template-data": [] // шаблонная часть датасета
}
```
Каждай из частей датасета это массив данных для обучения
## Ручная часть датасета
Массив hand-data состоит из словарей вида:
#### Пример элемента датасета
Сущность: ника
```json
{
    "text": "что такое ника", // Фраза
    "classification": "about_entity", // Класс сообщения
    "slots": [ // Слоты (сущности)
        {
            "entity": "rrel_entity", // Класс сущности
            "tokens": [ // Токены в которых находится сущность
                2
            ]
        }
    ]
}
```
### Слоты
Фраза в датасете обязательно пишется в нижнем регистре и без спец символов. Каждый слот это отдельная сущность, слот может быть один, но также их может быть и много. Слот состоит из класса сущности и токенов. Если с первым все понятно, то токены, это номера слов в которых находится сущность (счет слов идет с 0). Так, нулевое слово *что*, первое *такое*, втрое (сущность) ника. Если сущностью является несколько слов, то токенов может быть несколько.
#### Пример элемента датасета, с сущностью, которая занимает несколько слов
Сущность: теорема пифагора
```json
{
    "text": "расскажи теорему пифагора", // Фраза
    "classification": "about_entity", // Класс сообщения
    "slots": [ // Слоты (сущности)
        {
            "entity": "rrel_entity", // Класс сущности
            "tokens": [ // Токены в которых находится сущность
                1,
                2
            ]
        }
    ]
}
```
#### Пример элемента датасета, с несколькими сущностями
Сущность rrel_entity: футер
Сущность rrel_color: 565656
```json
{
    "text": "поменяй цвет футера на 565656", // Фраза
    "classification": "about_entity", // Класс сообщения
    "slots": [ // Слоты (сущности)
        {
            "entity": "rrel_entity", // Класс сущности
            "tokens": [ // Токены в которых находится сущность
                2
            ]
        },
        {
            "entity": "rrel_color", // Класс сущности
            "tokens": [ // Токены в которых находится сущность
                4
            ]
        }
    ]
}
```
## Шаблонная часть датасета
Массив template-data состоит из словарей вида:
#### Пример элемента датасета
```json
{
    "classification": "about_entity", // Класс сообщения
    "texts": [ // Массив шаблонов фраз с переменными
        "расскажи $rrel_entity"
    ],
    "entitys": { // Сущности (переменные в фразе)
        "rrel_entity": [
            {
                "text": "теорему пифагора", // Значение, которое подставится в фразу на место соответствующей переменной
                "value": "теорема пифагора" // Значение, которое будет возвращать классификатор
            },
            {
                "text": "аксиому прямых", // Значение, которое подставится в фразу на место соответствующей переменной
                "value": "аксиома прямых" // Значение, которое будет возвращать классификатор
            }
        ]
    }
}
```
#### Тот же самый пример, если бы он писался в ручной части
```json
dataset.json
{
    "hand-data": [
        {
            "text": "расскажи теорему пифагора", 
            "classification": "about_entity", 
            "slots": [ 
                {
                    "entity": "rrel_entity", 
                    "tokens": [ 
                        1,
                        2
                    ]
                }
            ]
        }
        {
            "text": "расскажи аксиому прямых", 
            "classification": "about_entity", 
            "slots": [ 
                {
                    "entity": "rrel_entity", 
                    "tokens": [ 
                        1,
                        2
                    ]
                }
            ]
        }
    ],
    "template-data":[]
}
sinonimz.json
{
    "теорему пифагора": "теорема Пифагора",
    "аксиому прямых": "аксиома прямых"
}
```

#### Пример элемента датасета c несколькими сущностями
``` json
{
    "classification": "color_message",
    "texts": [
        "поменяй цвет $rrel_entity на $rrel_color"
    ],
    "entitys": {
        "rrel_entity": [
            {
                "text": "основной части",
                "value": "основная часть"
            },
            {
                "text": "хедера",
                "value": "хедер"
            }
        ],
        "rrel_color": [
            {
                "text": "3f3f3f",
                "value": "#3f3f3f"
            },
            {
                "text": "888888",
                "value": "#888888"
            }
        ]
    }
}
```
Данный пример эквивалентен четырем фразам:
- Поменяй цвет основной части на #3f3f3f
- Поменяй цвет основной части на #888888
- Поменяй цвет хедера на #3f3f3f
- Поменяй цвет хедера на #888888

# Пример элемента датасета без сущностей
```json
{
    "classification": "greeting",
    "texts": [
        "привет",
        "хай"
    ],
    "entitys": {}
}
```

# Синонимы
Если имя сущности не совпадает с сущностью в фразе, например в фразе написано "Расскажи теорему Пифагора", а мы хотим получить сущность "теорема Пифагора", на помощь приходят синонимы. В папке проекта есть файл синонимов ```sinonimz.json```. Чтобы классификатор вместо "теорему пифагора" выдавал сущность "теорема Пифагора", нужно добавить в файл синонимов запись ```"теорему пифагора": "теорема Пифагора"```. Первый элемент это то, что есть в фразе, а второй - то, что мы хотим видеть. Первый элемент обязательно должен быть в нижнем регистре и без спецзнаков, во втором элементе могут быть заглавные букы и спец знаки. Синонимы в шаблонной части датасета добавляются автоматически.